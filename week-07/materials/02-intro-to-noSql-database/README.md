# üçÉ Intro to MongoDB

MongoDB is a **NoSQL**, document-based database that's fast, flexible, and widely used in modern web apps.
This guide shows how to use **MongoDB directly** in FastAPI (with `pymongo`) and access it from your **React frontend**.

---

## üéØ Why Use MongoDB?

- Stores data in **JSON-like documents**
- Schema-less: Flexible structure
- Scales horizontally (great for distributed systems)
- Excellent for modern JavaScript apps (JSON in, JSON out)

---

## ‚öôÔ∏è Setup

### 1. Install MongoDB (locally or via Atlas)

- [MongoDB Download](https://www.mongodb.com/try/download/community)
- Or use a **free cloud DB** via [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)

### 2. Install `pymongo`

```bash
pip install pymongo
```

---

## üîå Connecting to MongoDB

```python
# db.py
from pymongo import MongoClient

# Local
client = MongoClient("mongodb://localhost:27017/")

# Cloud (MongoDB Atlas)
# client = MongoClient("mongodb+srv://<user>:<password>@cluster0.mongodb.net/?retryWrites=true&w=majority")

db = client["mydatabase"]
items_collection = db["items"]
```

---

## üß± Inserting Documents

```python
item = {"name": "Marker", "description": "Black permanent marker"}
items_collection.insert_one(item)
```

---

## üì• Fetching Documents

```python
items = list(items_collection.find())
for item in items:
    item["_id"] = str(item["_id"])  # Convert ObjectId to string for JSON response
```

---

## ‚úÖ FastAPI Example

```python
from fastapi import FastAPI
from bson import ObjectId
from db import items_collection

app = FastAPI()

@app.get("/items")
def get_items():
    items = []
    for item in items_collection.find():
        item["_id"] = str(item["_id"])
        items.append(item)
    return items

@app.post("/items")
def create_item(item: dict):
    result = items_collection.insert_one(item)
    return {"_id": str(result.inserted_id)}
```

---

## üíª React Example (Frontend)

### Fetch Items

```jsx
// fetchItems.js
export async function fetchItems() {
  const res = await fetch('http://localhost:8000/items');
  return await res.json();
}
```

### Post Item

```jsx
// postItem.js
export async function postItem(data) {
  await fetch('http://localhost:8000/items', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(data)
  });
}
```

---

## ‚ö†Ô∏è Common Pitfalls

| Mistake                        | Fix                                     |
| ------------------------------ | --------------------------------------- |
| Returning raw `_id` (ObjectId) | Convert to string: `str(item["_id"])`   |
| Skipping `await` in React      | Always use `await` when using `fetch()` |
| Not validating data            | Add checks in FastAPI before inserting  |
| Hardcoding DB credentials      | Use `.env` or secrets manager           |

---

## üóÉÔ∏è MongoDB Document Structure

MongoDB stores data in **documents**, like this:

```json
{
  "_id": "66a01961f8d6d030ae8f0c6d",
  "name": "Notebook",
  "description": "A ruled paper notebook"
}
```

- `_id`: Unique MongoDB ObjectId (autogenerated if not provided)
- Fields can be anything ‚Äî JSON-like structure

---

## üìò Learn More

- üîó [MongoDB Docs](https://www.mongodb.com/docs/)
- üîó [pymongo Docs](https://pymongo.readthedocs.io/en/stable/)
- üîó [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
- üé• [FastAPI + MongoDB Tutorial](https://www.youtube.com/watch?v=0sOvCWFmrtA)

---

## üß™ Test Locally

- Run MongoDB locally or connect to MongoDB Atlas
- Start FastAPI backend:

```bash
uvicorn main:app --reload
```

- Open Swagger docs:
  [http://localhost:8000/docs](http://localhost:8000/docs)

- Test with Postman or React frontend

---

## ‚úÖ Summary

| Component | Purpose                     | Python Tool |
| --------- | --------------------------- | ----------- |
| MongoDB   | NoSQL document store        | `pymongo`   |
| FastAPI   | API server                  | `fastapi`   |
| React     | Frontend to consume the API | `fetch` API |

---
